<div class="family-detail-container">
  <header class="page-header">
    <button type="button" class="back-button" (click)="goBack()">← Retour aux familles</button>
    <h1>Détails de la famille</h1>
  </header>

  @if (isLoading()) {
  <div class="loading-state">
    <p>Chargement des détails de la famille...</p>
  </div>
  } @if (error()) {
  <div class="error-state">
    <p>{{ error() }}</p>
    <button type="button" (click)="goBack()">Retour à la liste</button>
  </div>
  } @if (!isLoading() && !error() && family()) {
  <div class="family-detail-content">
    <section class="family-info-section">
      <h2>{{ family()!.familyName }}</h2>

      <div class="info-grid">
        <div class="info-item">
          <strong>Responsables légaux:</strong>
          <ul>
            @for (guardian of family()!.guardianNames; track $index) {
            <li>{{ guardian }}</li>
            }
          </ul>
        </div>

        <div class="info-item">
          <strong>Adresse:</strong>
          <p>{{ family()!.address }}</p>
        </div>

        <div class="info-item">
          <strong>Téléphone:</strong>
          <p>{{ family()!.phoneNumber }}</p>
        </div>

        <div class="info-item">
          <strong>Email:</strong>
          <p>{{ family()!.email }}</p>
        </div>
      </div>
    </section>

    <section class="children-section">
      <h3>Enfants ({{ family()!.children?.length || 0 }})</h3>

      @if (family()!.children && family()!.children!.length > 0) {
      <div class="children-list">
        @for (child of family()!.children; track child.id) {
        <div class="child-card">
          <h4>{{ child.firstName }} {{ child.lastName }}</h4>
          <p><strong>Date de naissance:</strong> {{ child.birthDate | date: 'dd/MM/yyyy' }}</p>
          <p><strong>Âge:</strong> {{ child.age }} ans</p>
        </div>
        }
      </div>
      } @else {
      <div class="empty-state">
        <p>Aucun enfant enregistré pour cette famille</p>
      </div>
      }
    </section>
  </div>
  }
</div>
